# 最初にやること

## 注意事項
- この手順は、チームの代表者一人が実行してください。

## 手順(VM)

1. VM環境に、 fork したリポジトリをクローンしてください。

    ```bash
    $ git clone {forkしたリポジトリのURL}
    ```

1. ホームディレクトリにある init.sh を実行してください。docker コンテナが起動し、初期データが投入されます。

   **※初回起動時は docker build のキャッシュがないため、コンテナの起動に時間がかかる可能性があります。**

   ```bash
   $ cd {cloneしたリポジトリのディレクトリ}
   $ bash init.sh
    ===================================================
    
    
    初期化に成功しました。以下を確認してみてください
    ・web画面へアクセスできること(https://app-{チーム名}.hutc2511.dabaas.net/login)
    ・初期スコアの計算（ルートディレクトリのrun.shを実行してみてください。）
    
    
    ===================================================
    ```

    「初期化に成功しました。」という出力がされていれば、無事に VM 環境での開発準備ができています。`https://app-{チーム名}.hutc2511.dabaas.net/login` にアクセスしログイン画面が表示されるか確認してみてください。反映に少し時間がかかる場合もあるので、キャッシュを削除したり少し時間置いたりしてください。

1. 以下のコマンドを実行し、評価スクリプトを動かしてみてください。

   ```bash
   $ bash ./run.sh
   負荷試験を開始するためのリクエストを送信します。

   ===================================================


   負荷試験のリクエストに成功しました。
   ジョブID: aaa-bbb-ccc-ddd
   上記のジョブIDをもとに負荷試験のステータスを確認できます
   bash ./get_test_status.sh {ジョブID}


   ===================================================
   ```

1. 表示されたコマンドをそのままコピペし負荷試験結果をリスニング

   ```bash
   $ bash ./get_test_status.sh {ジョブID}
   ```

   ※今回のチューニングコンテストでは、AP サーバと負荷試験サーバを分けています。

## 最初の採点終了後

- ここまでの手順が無事に終わると、運営にスコアが送信されます。
- この後は自由にチューニングを進めてもらって大丈夫です。
- 競技概要ついては下記のドキュメントをご参照ください。
  - [競技概要](../rules/01_Contest.md)
- 作業効率化のために、ローカル環境での開発環境の構築を行うことをお勧めします。

## チューニング後の再負荷試験

1. fork したレポジトリの main ブランチに最新の状態を push してください
2. VM の環境にログインしてください

   ```bash
   $ ssh -i {秘密鍵のパス} azureuser@{VMのパブリックIPアドレス}
   ```

3. レポジトリのディレクトリに入り、最新の状態を Pull してください

   ```bash
   $ cd {forkしたリポジトリ名}
   $ git checkout main
   $ git pull
   ```

4. 評価スクリプトを動かしましょう

   ```bash
   $ bash ./run.sh
   ```

---

[トップ](../../../README.md)
